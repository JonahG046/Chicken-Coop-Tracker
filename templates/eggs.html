{% extends "layout.html" %}

{% block content %}
<h2>Egg Logs</h2>

<button onclick="openPopup('{{ url_for('add_eggs') }}')">Add Egg Log</button>

<div class="chart-container">
    <h3>Eggs Last 7 Days</h3>
    <canvas id="eggChart"></canvas>
</div>

<script>
    const eggData = {{ egg_data|tojson }};

    function renderChart(ctx, data, label, color) {
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: Object.keys(data),
                datasets: [{
                    label: label,
                    data: Object.values(data),
                    borderColor: color,
                    backgroundColor: 'transparent',
                    tension: 0.3
                }]
            },
            options: {
                responsive: true,
                scales: { y: { beginAtZero: true } }
            }
        });
    }

    renderChart(
        document.getElementById('eggChart').getContext('2d'),
        eggData,
        'Eggs Collected',
        'orange'
    );
</script>
{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/popup.js') }}"></script>
{% endblock %}