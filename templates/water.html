{% extends "layout.html" %}

{% block content %}
<div class="card single-card">
    <h2>Water Logs</h2>

    <button class="add-btn" onclick="openPopup('{{ url_for('add_water') }}')">
        Add Water Log
    </button>

    <canvas id="waterChart"></canvas>
</div>

<script>
    const waterData = {{ water_data|tojson }};

    new Chart(document.getElementById('waterChart'), {
        type: 'line',
        data: {
            labels: Object.keys(waterData),
            datasets: [{
                label: "Water (gal)",
                data: Object.values(waterData),
                borderColor: "blue",
                backgroundColor: "transparent",
                tension: 0.3
            }]
        },
        options: {
            responsive: true,
            scales: { y: { beginAtZero: true } }
        }
    });
</script>
{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/popup.js') }}"></script>
{% endblock %}