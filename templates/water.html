{% extends "layout.html" %}

{% block content %}
<h2>Water Logs</h2>

<button onclick="openPopup('{{ url_for('add_water') }}')">Add Water Log</button>

<div class="chart-container">
    <h3>Water Last 7 Days</h3>
    <canvas id="waterChart"></canvas>
</div>

<script>
    // Convert Python data â†’ JS
    const waterData = {{ water_data|tojson }};

    function renderChart(ctx, data, label, color) {
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: Object.keys(data),
                datasets: [{
                    label: label,
                    data: Object.values(data),
                    borderColor: color,
                    backgroundColor: 'transparent',
                    fill: false,
                    tension: 0.3
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: { beginAtZero: true }
                }
            }
        });
    }

    renderChart(
        document.getElementById('waterChart').getContext('2d'),
        waterData,
        'Water (L)',
        'blue'
    );
</script>
{% endblock %}